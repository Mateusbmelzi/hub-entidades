<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Editar Evento</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        .error { color: red; }
        .success { color: green; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        input, textarea { width: 100%; padding: 8px; margin: 5px 0; }
        label { display: block; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>Teste de Edição de Evento</h1>
    
    <div class="test-section">
        <h2>Teste de Processamento de Data/Hora</h2>
        <label>Data e Hora (datetime-local):</label>
        <input type="datetime-local" id="dataEvento" value="2025-01-20T14:30">
        
        <button onclick="testarProcessamentoData()">Testar Processamento</button>
        
        <div id="resultadoData"></div>
    </div>
    
    <div class="test-section">
        <h2>Teste de Validação de Dados</h2>
        <label>Nome:</label>
        <input type="text" id="nome" value="Workshop de React">
        
        <label>Descrição:</label>
        <textarea id="descricao" rows="3">Descrição do workshop</textarea>
        
        <label>Local:</label>
        <input type="text" id="local" value="Auditório A">
        
        <label>Capacidade:</label>
        <input type="number" id="capacidade" value="50">
        
        <label>Link do Evento:</label>
        <input type="text" id="link_evento" value="https://example.com">
        
        <button onclick="validarDados()">Validar Dados</button>
        
        <div id="resultadoValidacao"></div>
    </div>
    
    <div class="test-section">
        <h2>Simulação de Update</h2>
        <button onclick="simularUpdate()">Simular Update</button>
        
        <div id="resultadoUpdate"></div>
    </div>

    <script>
        function testarProcessamentoData() {
            const dataEvento = document.getElementById('dataEvento').value;
            const resultado = document.getElementById('resultadoData');
            
            try {
                const d = new Date(dataEvento);
                if (isNaN(d.getTime())) {
                    throw new Error('Data inválida');
                }
                
                const dataStr = d.toISOString().slice(0, 10);   // YYYY-MM-DD
                const horarioStr = d.toISOString().slice(11, 19); // HH:mm:ss
                
                resultado.innerHTML = `
                    <div class="success">
                        <strong>✅ Data processada com sucesso!</strong><br>
                        Data: ${dataStr}<br>
                        Horário: ${horarioStr}<br>
                        Data original: ${d.toLocaleString('pt-BR')}
                    </div>
                `;
            } catch (error) {
                resultado.innerHTML = `<div class="error">❌ Erro: ${error.message}</div>`;
            }
        }
        
        function validarDados() {
            const nome = document.getElementById('nome').value;
            const descricao = document.getElementById('descricao').value;
            const local = document.getElementById('local').value;
            const capacidade = document.getElementById('capacidade').value;
            const link_evento = document.getElementById('link_evento').value;
            
            const resultado = document.getElementById('resultadoValidacao');
            const erros = [];
            
            if (!nome.trim()) erros.push('Nome é obrigatório');
            if (!descricao.trim()) erros.push('Descrição é obrigatória');
            if (!local.trim()) erros.push('Local é obrigatório');
            if (capacidade && parseInt(capacidade) <= 0) erros.push('Capacidade deve ser maior que 0');
            if (link_evento && !link_evento.startsWith('http')) erros.push('Link deve começar com http');
            
            if (erros.length === 0) {
                resultado.innerHTML = '<div class="success">✅ Todos os dados são válidos!</div>';
            } else {
                resultado.innerHTML = `<div class="error">❌ Erros encontrados:<br>${erros.join('<br>')}</div>`;
            }
        }
        
        function simularUpdate() {
            const resultado = document.getElementById('resultadoUpdate');
            
            // Simular dados de update
            const updateData = {
                nome: document.getElementById('nome').value,
                descricao: document.getElementById('descricao').value,
                local: document.getElementById('local').value,
                capacidade: parseInt(document.getElementById('capacidade').value) || undefined,
                link_evento: document.getElementById('link_evento').value,
                data: '2025-01-20',
                horario: '14:30:00'
            };
            
            resultado.innerHTML = `
                <div class="success">
                    <strong>✅ Dados preparados para update:</strong><br>
                    <pre>${JSON.stringify(updateData, null, 2)}</pre>
                </div>
            `;
        }
    </script>
</body>
</html>
